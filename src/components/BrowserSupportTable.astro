---
const { browserSupport, compatDataStatus } = Astro.props;

const browserConfig = {
  chrome: { icon: "/images/icons/chrome.svg", label: "Chrome" },
  firefox: { icon: "/images/icons/firefox.svg", label: "Firefox" },
  safari: { icon: "/images/icons/safari.svg", label: "Safari" },
  edge: { icon: "/images/icons/edge.svg", label: "Edge" },
};
---

<div class="prose">
  <h2 class="sr-only">Browser Support</h2>
  <div class="flex flex-col gap-[16px] browser-support-table">
    <div class="flex gap-x-[16px]">
      {compatDataStatus?.experimental && <h3 class="pt-[5px]">Experimental</h3>}
      {compatDataStatus?.deprecated && <h3 class="pt-[5px]">Deprecated</h3>}
      {
        compatDataStatus?.standard_track &&
          !compatDataStatus?.experimental &&
          !compatDataStatus?.deprecated && (
            <h3 class="pt-[5px]" style="font-family: var(--font-base);
            font-size: 10px;
            letter-spacing: 0.14em;
            color: var(--accent);
            text-transform: uppercase;
            margin-bottom: 8px;">Fully supported</h3>
          )
      }
    </div>
    <div class="!grid grid-cols-2 gap-x-[8px] flex-wrap items-center gap-y-[var(--space-s)] w-full">
      {
        browserSupport.map((item) => {
          const config = browserConfig[item.browser];
          if (!config) return null;
          return (
            <div
              class={`col-span-1 flow items-baseline gap-x-[6px] border px-[var(--space-s)] pb-[var(--space-xs)] justify-center text-center ${item.support === "Supported" ? "" : "opacity-50"}`}
              style="--flow-space: var(--space-s)"
            >
              <span class="text-sm">{config.label}</span>
              <span class="text-sm text-[var(--color-accent)] font-semibold">{item.version}</span>
            </div>
          );
        })
      }
    </div>
  </div>
</div>
